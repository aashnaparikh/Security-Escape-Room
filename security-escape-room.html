<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberSec Escape Room - Security Awareness Training</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Start Screen */
        .start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            color: white;
            text-align: center;
        }

        .start-screen h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 10px rgba(255,255,255,0.3); }
            to { text-shadow: 2px 2px 4px rgba(0,0,0,0.3), 0 0 20px rgba(255,255,255,0.6); }
        }

        .start-screen p {
            font-size: 1.3em;
            margin-bottom: 30px;
            max-width: 600px;
        }

        .btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Game Screen */
        .game-screen {
            display: none;
            color: white;
        }

        .game-header {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer {
            font-size: 1.5em;
            font-weight: bold;
        }

        .score {
            font-size: 1.3em;
        }

        .progress-bar {
            flex: 1;
            min-width: 200px;
            background: rgba(255,255,255,0.2);
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            transition: width 0.5s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .room {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            padding: 40px;
            color: #333;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }

        .room h2 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .room-description {
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
            color: #555;
        }

        .challenge-section {
            margin-top: 30px;
        }

        .email-container {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .email-header {
            background: #f5f5f5;
            padding: 20px;
            border-bottom: 2px solid #ddd;
        }

        .email-field {
            margin-bottom: 10px;
            display: flex;
            gap: 10px;
        }

        .email-field strong {
            min-width: 80px;
            color: #555;
        }

        .email-body {
            padding: 30px;
            line-height: 1.8;
            font-size: 1.05em;
        }

        .suspicious-link {
            color: #2196F3;
            text-decoration: underline;
            cursor: pointer;
        }

        .answer-section {
            background: #f9f9f9;
            padding: 25px;
            border-radius: 10px;
            margin-top: 20px;
        }

        .answer-section h3 {
            color: #667eea;
            margin-bottom: 20px;
        }

        .answer-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .answer-btn {
            background: white;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: left;
            font-size: 1.05em;
        }

        .answer-btn:hover {
            border-color: #667eea;
            background: #f0f0ff;
            transform: translateX(5px);
        }

        .answer-btn.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .answer-btn.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .feedback.correct {
            background: #e8f5e9;
            border: 2px solid #4CAF50;
            color: #2e7d32;
        }

        .feedback.incorrect {
            background: #ffebee;
            border: 2px solid #f44336;
            color: #c62828;
        }

        .feedback.show {
            display: block;
        }

        .next-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            margin-top: 20px;
            transition: all 0.3s;
            display: none;
        }

        .next-btn.show {
            display: inline-block;
        }

        .next-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
        }

        /* Results Screen */
        .results-screen {
            display: none;
            min-height: 100vh;
            align-items: center;
            justify-content: center;
            color: white;
            text-align: center;
        }

        .results-container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 50px;
            border-radius: 20px;
            max-width: 600px;
        }

        .results-container h2 {
            font-size: 3em;
            margin-bottom: 20px;
        }

        .final-score {
            font-size: 4em;
            margin: 30px 0;
            font-weight: bold;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tips-section {
            background: rgba(255,255,255,0.1);
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
            text-align: left;
        }

        .tips-section h3 {
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .tips-section ul {
            list-style-position: inside;
            line-height: 2;
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .puzzle-item {
            background: white;
            border: 2px solid #ddd;
            padding: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .puzzle-item:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .puzzle-item.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .input-answer {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #ddd;
            border-radius: 10px;
            margin: 20px 0;
        }

        .submit-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            background: #5568d3;
        }

        .hint-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 10px 25px;
            border-radius: 20px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .hint-btn:hover {
            background: #f57c00;
        }

        .hint-box {
            background: #fff3e0;
            border: 2px solid #ff9800;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .hint-box.show {
            display: block;
        }

        @media (max-width: 768px) {
            .start-screen h1 {
                font-size: 2.5em;
            }
            
            .room {
                padding: 20px;
            }
            
            .game-header {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <div class="container">
            <h1>üîí CyberSec Escape Room</h1>
            <p>You've been locked in a simulated security breach! Solve cybersecurity challenges, identify phishing attempts, and secure the system to escape. Your company's security depends on it!</p>
            <button class="btn" onclick="startGame()">Start Training</button>
        </div>
    </div>

    <!-- Game Screen -->
    <div class="game-screen" id="gameScreen">
        <div class="container">
            <div class="game-header">
                <div class="timer">‚è±Ô∏è Time: <span id="timer">00:00</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar" style="width: 0%">
                        Room <span id="currentRoom">1</span> of 5
                    </div>
                </div>
                <div class="score">üèÜ Score: <span id="score">0</span></div>
            </div>

            <div class="room" id="roomContainer">
                <!-- Room content will be dynamically loaded here -->
            </div>
        </div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen" id="resultsScreen">
        <div class="results-container">
            <h2>üéâ Training Complete!</h2>
            <div class="final-score" id="finalScore">0</div>
            <p style="font-size: 1.3em; margin-bottom: 20px;">Points Earned</p>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="correctAnswers">0</div>
                    <div>Correct</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalTime">0:00</div>
                    <div>Time</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="accuracy">0%</div>
                    <div>Accuracy</div>
                </div>
            </div>

            <div class="tips-section">
                <h3>üõ°Ô∏è Key Takeaways</h3>
                <ul id="takeawaysList">
                    <!-- Will be populated dynamically -->
                </ul>
            </div>

            <button class="btn" onclick="restartGame()" style="margin-top: 30px;">Train Again</button>
        </div>
    </div>

    <script>
        // Game State
        let currentRoomIndex = 0;
        let score = 0;
        let startTime;
        let timerInterval;
        let correctAnswers = 0;
        let totalQuestions = 0;
        let answeredCurrentRoom = false;

        // Room Data
        const rooms = [
            {
                title: "üé£ Room 1: The Phishing Email",
                description: "You receive an urgent email in your inbox. Your first challenge is to identify whether this is a legitimate email or a phishing attempt.",
                challenge: {
                    type: "email",
                    email: {
                        from: "security@paypa1-support.com",
                        to: "you@company.com",
                        subject: "URGENT: Verify Your Account Now!",
                        body: `Dear Valued Customer,<br><br>
                        We have detected unusual activity on your account. For your security, we need you to verify your identity immediately.<br><br>
                        <strong>Your account will be suspended in 24 hours if you don't act now!</strong><br><br>
                        Please click here to verify: <span class="suspicious-link">https://paypa1-secure-verify.com/login</span><br><br>
                        Thank you for your immediate attention to this matter.<br><br>
                        Security Team<br>
                        PayPal Inc.`
                    },
                    question: "What are the red flags in this email?",
                    options: [
                        {
                            text: "The sender's email domain is 'paypa1-support.com' (with number 1 instead of letter l)",
                            correct: true,
                            explanation: "Excellent! The domain uses '1' instead of 'l' - a classic phishing technique called typosquatting."
                        },
                        {
                            text: "The email seems fine, I should click the link",
                            correct: false,
                            explanation: "Not quite! This email has multiple red flags. The suspicious domain, urgency tactics, and threatening tone are all signs of phishing."
                        },
                        {
                            text: "The URL uses 'https' so it's secure",
                            correct: false,
                            explanation: "Common misconception! HTTPS only means the connection is encrypted - phishing sites can also use HTTPS."
                        },
                        {
                            text: "PayPal would never send urgent security emails",
                            correct: false,
                            explanation: "While legitimate companies may send security alerts, this email has multiple red flags including the fake domain and threatening urgency."
                        }
                    ],
                    points: 100,
                    learningPoint: "Always check sender domains carefully! Phishers use similar-looking domains to trick you."
                }
            },
            {
                title: "üîê Room 2: Password Security",
                description: "You've discovered a password creation form. Your task is to identify which password is the most secure.",
                challenge: {
                    type: "puzzle",
                    question: "Which of these passwords is the MOST secure?",
                    options: [
                        {
                            text: "Password123!",
                            correct: false,
                            explanation: "This is weak! It's a dictionary word with predictable substitutions. Hackers check these first."
                        },
                        {
                            text: "john.doe@2024",
                            correct: false,
                            explanation: "Too predictable! Personal information like names and current years are easily guessed."
                        },
                        {
                            text: "Tr0ub4dor&3",
                            correct: false,
                            explanation: "Better, but still follows predictable patterns. Length matters more than complexity!"
                        },
                        {
                            text: "correct-horse-battery-staple-7$mK",
                            correct: true,
                            explanation: "Perfect! This passphrase is long, memorable, and includes random elements. Length + randomness = strong security."
                        }
                    ],
                    points: 100,
                    learningPoint: "Long passphrases with 4+ random words are stronger and easier to remember than short complex passwords!"
                }
            },
            {
                title: "üåê Room 3: URL Analysis",
                description: "You need to access your bank account, but there are multiple links. Which URL is the legitimate banking website?",
                challenge: {
                    type: "puzzle",
                    question: "Identify the legitimate bank website:",
                    options: [
                        {
                            text: "https://www.bankofamerica.com/login",
                            correct: true,
                            explanation: "Correct! This is the legitimate URL with proper HTTPS and correct domain spelling."
                        },
                        {
                            text: "http://bankofamerica-secure.com/login",
                            correct: false,
                            explanation: "Red flag! This uses HTTP (not secure) and a suspicious subdomain structure."
                        },
                        {
                            text: "https://www.bankofamerica.verify-account.com",
                            correct: false,
                            explanation: "Tricky! The domain actually ends in 'verify-account.com', not 'bankofamerica.com'."
                        },
                        {
                            text: "https://bankofamerlca.com/login",
                            correct: false,
                            explanation: "Close but fake! It's 'amerlca' not 'america' - a typosquatting attack."
                        }
                    ],
                    points: 100,
                    learningPoint: "Always verify the exact domain! Phishers use similar-looking URLs and subdomains to deceive you."
                }
            },
            {
                title: "üì± Room 4: Social Engineering",
                description: "You receive a phone call from someone claiming to be IT support asking for sensitive information.",
                challenge: {
                    type: "scenario",
                    scenario: `<strong>Phone Call Scenario:</strong><br><br>
                    Caller: "Hi, this is Mike from IT Support. We're experiencing a critical security issue and need to verify your credentials immediately. Can you provide your username and password so we can secure your account?"`,
                    question: "What should you do?",
                    options: [
                        {
                            text: "Provide the information since they're from IT",
                            correct: false,
                            explanation: "Never do this! Legitimate IT never asks for passwords over the phone."
                        },
                        {
                            text: "Hang up and call IT using the official company number to verify",
                            correct: true,
                            explanation: "Perfect! Always verify requests through official channels. This prevents social engineering attacks."
                        },
                        {
                            text: "Ask them to email you instead",
                            correct: false,
                            explanation: "Still risky! Emails can also be spoofed. Always verify through official company channels first."
                        },
                        {
                            text: "Give them your username but not password",
                            correct: false,
                            explanation: "Still not secure! Never provide any credentials based on unsolicited requests."
                        }
                    ],
                    points: 100,
                    learningPoint: "Verify ALL requests for sensitive information through official channels, even if they seem legitimate!"
                }
            },
            {
                title: "üìé Room 5: Attachment Safety",
                description: "You receive an email with an attachment. Determine if it's safe to open.",
                challenge: {
                    type: "email",
                    email: {
                        from: "hr@yourcompany.com",
                        to: "you@company.com",
                        subject: "Updated Employee Handbook - Please Review",
                        body: `Hi Team,<br><br>
                        Please find attached the updated employee handbook for 2025. All employees must review this document by end of week.<br><br>
                        Attachment: <strong>Employee_Handbook_2025.pdf.exe</strong><br><br>
                        Best regards,<br>
                        HR Department`
                    },
                    question: "Should you open this attachment?",
                    options: [
                        {
                            text: "Yes, it's from HR so it's safe",
                            correct: false,
                            explanation: "Be careful! Email addresses can be spoofed. More importantly, check the file extension!"
                        },
                        {
                            text: "No, the file extension '.pdf.exe' is suspicious - it's an executable disguised as a PDF",
                            correct: true,
                            explanation: "Excellent catch! Double extensions like '.pdf.exe' are a huge red flag. The file is actually an executable program, not a PDF."
                        },
                        {
                            text: "Yes, but scan it with antivirus first",
                            correct: false,
                            explanation: "While scanning is good practice, the '.exe' extension means this is an executable program, not a document. Don't open it!"
                        },
                        {
                            text: "Ask HR if they sent it",
                            correct: false,
                            explanation: "Good thinking to verify, but the '.exe' extension already tells you this is malicious. Report it immediately!"
                        }
                    ],
                    points: 100,
                    learningPoint: "Always check file extensions! Legitimate documents shouldn't have '.exe', '.scr', or other executable extensions."
                }
            }
        ];

        // Start Game
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            currentRoomIndex = 0;
            score = 0;
            correctAnswers = 0;
            totalQuestions = rooms.length;
            startTime = Date.now();
            
            updateScore();
            startTimer();
            loadRoom();
        }

        // Timer
        function startTimer() {
            timerInterval = setInterval(() => {
                const elapsed = Date.now() - startTime;
                const minutes = Math.floor(elapsed / 60000);
                const seconds = Math.floor((elapsed % 60000) / 1000);
                document.getElementById('timer').textContent = 
                    `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
            }, 1000);
        }

        // Load Room
        function loadRoom() {
            answeredCurrentRoom = false;
            const room = rooms[currentRoomIndex];
            const container = document.getElementById('roomContainer');
            
            // Update progress
            document.getElementById('currentRoom').textContent = currentRoomIndex + 1;
            document.getElementById('progressBar').style.width = 
                ((currentRoomIndex + 1) / rooms.length * 100) + '%';
            
            let html = `
                <h2>${room.title}</h2>
                <p class="room-description">${room.description}</p>
                <div class="challenge-section">
            `;
            
            if (room.challenge.type === 'email') {
                html += `
                    <div class="email-container">
                        <div class="email-header">
                            <div class="email-field"><strong>From:</strong> ${room.challenge.email.from}</div>
                            <div class="email-field"><strong>To:</strong> ${room.challenge.email.to}</div>
                            <div class="email-field"><strong>Subject:</strong> ${room.challenge.email.subject}</div>
                        </div>
                        <div class="email-body">
                            ${room.challenge.email.body}
                        </div>
                    </div>
                `;
            } else if (room.challenge.type === 'scenario') {
                html += `
                    <div style="background: #f5f5f5; padding: 25px; border-radius: 10px; border-left: 4px solid #ff9800; margin-bottom: 20px;">
                        ${room.challenge.scenario}
                    </div>
                `;
            }
            
            html += `
                <div class="answer-section">
                    <h3>${room.challenge.question}</h3>
                    <div class="answer-options" id="answerOptions">
            `;
            
            room.challenge.options.forEach((option, index) => {
                html += `
                    <button class="answer-btn" onclick="checkAnswer(${index})">
                        ${option.text}
                    </button>
                `;
            });
            
            html += `
                    </div>
                    <div class="feedback" id="feedback"></div>
                    <button class="next-btn" id="nextBtn" onclick="nextRoom()">Next Challenge ‚Üí</button>
                </div>
                </div>
            `;
            
            container.innerHTML = html;
        }

        // Check Answer
        function checkAnswer(optionIndex) {
            if (answeredCurrentRoom) return;
            
            answeredCurrentRoom = true;
            const room = rooms[currentRoomIndex];
            const option = room.challenge.options[optionIndex];
            const buttons = document.querySelectorAll('.answer-btn');
            const feedback = document.getElementById('feedback');
            const nextBtn = document.getElementById('nextBtn');
            
            // Disable all buttons
            buttons.forEach(btn => btn.style.pointerEvents = 'none');
            
            // Highlight correct/incorrect
            buttons[optionIndex].classList.add(option.correct ? 'correct' : 'incorrect');
            
            // Show feedback
            if (option.correct) {
                feedback.className = 'feedback correct show';
                feedback.innerHTML = `
                    <h3>‚úÖ Correct!</h3>
                    <p><strong>${option.explanation}</strong></p>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #4CAF50;">
                        üí° <strong>Remember:</strong> ${room.challenge.learningPoint}
                    </p>
                `;
                score += room.challenge.points;
                correctAnswers++;
                updateScore();
            } else {
                feedback.className = 'feedback incorrect show';
                // Highlight the correct answer
                room.challenge.options.forEach((opt, idx) => {
                    if (opt.correct) {
                        buttons[idx].classList.add('correct');
                    }
                });
                feedback.innerHTML = `
                    <h3>‚ùå Not quite right</h3>
                    <p><strong>${option.explanation}</strong></p>
                    <p style="margin-top: 15px; padding-top: 15px; border-top: 2px solid #f44336;">
                        üí° <strong>Remember:</strong> ${room.challenge.learningPoint}
                    </p>
                `;
            }
            
            nextBtn.classList.add('show');
        }

        // Next Room
        function nextRoom() {
            currentRoomIndex++;
            if (currentRoomIndex < rooms.length) {
                loadRoom();
            } else {
                endGame();
            }
        }

        // Update Score
        function updateScore() {
            document.getElementById('score').textContent = score;
        }

        // End Game
        function endGame() {
            clearInterval(timerInterval);
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            const accuracy = Math.round((correctAnswers / totalQuestions) * 100);
            
            document.getElementById('gameScreen').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'flex';
            
            document.getElementById('finalScore').textContent = score;
            document.getElementById('correctAnswers').textContent = `${correctAnswers}/${totalQuestions}`;
            document.getElementById('totalTime').textContent = `${minutes}:${String(seconds).padStart(2, '0')}`;
            document.getElementById('accuracy').textContent = accuracy + '%';
            
            // Add key takeaways
            const takeaways = [
                "Always verify sender email addresses for suspicious domains",
                "Use long passphrases (4+ random words) instead of complex short passwords",
                "Check URLs carefully before clicking - look for typos and fake domains",
                "Never share credentials over phone/email, even if caller claims to be IT",
                "Be suspicious of attachments with double extensions like .pdf.exe",
                "Urgency and threats are common phishing tactics - take time to verify",
                "When in doubt, contact the company through official channels"
            ];
            
            const takeawaysList = document.getElementById('takeawaysList');
            takeawaysList.innerHTML = takeaways.map(tip => `<li>${tip}</li>`).join('');
        }

        // Restart Game
        function restartGame() {
            document.getElementById('resultsScreen').style.display = 'none';
            document.getElementById('startScreen').style.display = 'flex';
            currentRoomIndex = 0;
            score = 0;
            correctAnswers = 0;
        }
    </script>
</body>
</html>
